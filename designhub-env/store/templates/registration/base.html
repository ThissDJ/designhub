{% extends "shop/base.html" %}
{% load i18n %}
{% block extrastyle %}{% endblock extrastyle %}
{% block body %}

{% spaceless %}
<style>
    html{
    	min-width:680px;
    	/*height:100%;*/
    }
/*	body {
	    height: 100%;
	    margin: 0;
	}*/
/*	body {
	    height: 100%;
	    margin: 0;
	    background-repeat: no-repeat;
	    background-attachment: fixed;
	}*/
    input.login-input,#login-panel-container,.login-row,.pwd-reset-container{
        font-size:20px;
    }
	input.login-input{
		height:30px;width:19em;line-height:30px;/*color:#D04526;*/
	    border: 0px;/*10px solid rgb(127, 0, 0);*/
	   /* border:  10px solid rgba(255, 0, 0, .5);*/
	    -webkit-background-clip: padding-box; /* for Safari */
	    background-clip: padding-box; /* for IE9+, Firefox 4+, Opera, Chrome */
	    padding:0px;
	    margin:0px;
	    -webkit-border-radius:0px;
	    -moz-border-radius:0px;
	    border-radius:0px;
	}
	.pwd-reset-container{
		width:22.5em;margin-left:auto;margin-right:auto;
	}
	input.login-input:focus,input.login-input{
	    outline:0;outline:0;-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none;
	}
	#login-panel-container, input.login-input{
	    background-color: #F8FFB0;
	}
	#login-panel-container-container{
		width:100%;text-align:center;font-size:30px;padding-top:20px;
	}
	#login-panel-container{
		width:22em;
		margin-left:auto;
		margin-right:auto;
/*			color: #D04526;*/
		border: 10px solid #7F0000;
		border: 10px solid rgba(255, 0, 0, .5);
		-webkit-background-clip: padding-box;
		background-clip: padding-box;
	    -webkit-border-radius:5px;
	    -moz-border-radius:5px;
	    border-radius:5px;
	    -moz-box-shadow:   0px 1px 7px rgba(0,0,0,0.8), inset 0 0 10px #000000;
	    -webkit-box-shadow:  0px 1px 7px rgba(0,0,0,0.8),inset 0 0 10px #000000;
	    box-shadow: 0px 1px 7px rgba(0,0,0,0.8),  inset 0 0 10px #000000;
	}
	p.error{
		color:red;
		text-decoration:underline;
		margin-bottom:0px;
		text-align:center;
	}
	#login-panel-form{
		margin:20px 0px;
	}
	.login-row{
		width:19em;
		margin-left:auto;
		margin-right:auto;
		padding-left:1em;padding-right:1em;
		border-top:1px solid #FEFFE6; /*brighter*/
		border-bottom:1px solid #E1E5A1;
		padding-top:20px;
		padding-bottom:20px;
	}
	.login-row-first{
		border-top:0px;
/*			padding-bottom:0px;*/
	}
	.login-row-last{
/*			padding-top:0px;*/
		border-bottom:0px;
	}
    #login-submit-container{
    	margin-top:1%;
    	width:22em;
    	font-size:30px;
    	margin-left:auto;margin-right:auto;
    	text-align:center;
    }
    #login-submit-container .btn-login{
    	width:20em;
    }
    #login-submit-container .btn-login,#login-sns-container .login-sns-button,#signup-btn{
    	font-size:30px;
    	height:2em;
    	border:2px solid #fff;
	    -webkit-border-radius:30px;
	    -moz-border-radius:30px;
	    border-radius:30px;
	    -moz-box-shadow:   0px 1px 7px rgba(0,0,0,0.8), inset 0 0 10px #000000;
	    -webkit-box-shadow:  0px 1px 7px rgba(0,0,0,0.8), inset 0 0 10px #000000;
	    box-shadow:0px 1px 7px rgba(0,0,0,0.8), inset 0 0 10px #000000;
        text-shadow: 0 1px 0 #ccc, 
		               0 2px 0 #aaa,
		               0 4px 1px rgba(0,0,0,.1),
		               0 6px 6px rgba(0,0,0,.15);

    }
    #login-sep-line-container{
    	margin-top:8%;
    	margin-bottom:3%;
    }
    .sep-line-top{
    	border-top:1px solid rgba(0,0,0,0.5);
    }
    .sep-line-bottom{
    	border-top:1px solid rgba(256,256,256,0.5);
    }
    .login-tips{
    	text-align:center;font-size:20px;color:#555;
    	text-shadow: 0 1px 0 rgba(256,256,256,.8);/* rgba(0,0,0,.5);*/
    }
    #login-sns-container .login-sns-button,#signup-btn{
    	width:9em;
    	font-size:23px;
    	border-width:1px;
    }
    #login-right-panel{
/*    	position:absolute;
    	right:30px;
    	top:30px;*/
        top:20px;
        right:20px;
    	overflow:display;
    	z-index:999;
    	position: fixed;
    }

    #login-signup-button-container,#login-sns-container{
    	text-align:center;
    }
    .password-reset{
    	text-shadow: 0 1px 0 rgba(256,256,256,.8);
    }
	* {
	margin: 0;
	}
	html, body {
	height: 100%;
	}
	.wrapper {
		min-height: 100%;
		height: auto !important;
		height: 100%;
		margin: 0 auto -0em;
		background-image: -ms-radial-gradient(center, ellipse farthest-side,  rgba(126,126,126,0.5) 20%, rgba(0,0,0,0.8) 150%);
		
		/* Mozilla Firefox */ 
		background-image: -moz-radial-gradient(center, ellipse farthest-side,  rgba(126,126,126,0.5) 20%, rgba(0,0,0,0.8) 150%);
		
		/* Opera */ 
		background-image: -o-radial-gradient(center, ellipse farthest-side,   rgba(126,126,126,0.5) 20%, rgba(0,0,0,0.8) 150%);
		
		/* Webkit (Safari/Chrome 10) */ 
		background-image: -webkit-gradient(radial, center center, 0, center center, 487, color-stop(0.2, #FFFFFF), color-stop(1.5, rgba(0,0,0,0.8)));
		
		/* Webkit (Chrome 11+) */ 
		background-image: -webkit-radial-gradient(center, ellipse farthest-side, rgba(126,126,126,0.5) 20%, rgba(0,0,0,0.8) 150%);
		
		/* W3C Markup, IE10 Release Preview */ 
		background-image: radial-gradient(ellipse farthest-side at center,  rgba(126,126,126,0.5) 20%,rgba(0,0,0,0.8) 150%);
	
	}
	.footer, .push {
	height: 0em;
	}
	.footer, .push {
	clear: both;
	}

</style>
<!-- <div class="wrapper"> -->
<div class="wrapper" id="beautiful-login">

	<div id='login-panel-container-container'>
		<p style='text-align:center;margin-bottom:2em;'><img src='{{MEDIA_URL}}img/logo-damn.png' width=350></p>
		{% block loginsignupform %}
		<form id='login-panel-form' method='post' action='.'>
		<div id='login-panel-container'>
			    {% if form.non_field_errors %}
					<p style='margin-top:5px;' class="error">{% for err in form.non_field_errors %}{{ err }}{% if not forloop.last %}<br/>{% endif %}
				{% endfor %}</p>
				{% endif %}
				<div class='login-row login-row-first'>
					<input id='login-email' name='username' class='login-input' type='text' placeholder="Your login email" >
					{% if form.username.errors %}
					    <div style='float:left;'><p class='error'> ***{{ form.username.errors|join:", " }}</p></div>
					{% endif %}
				</div>
				<div class='login-row login-row-last'>
					<input type="hidden" name="next"
						{% if next %}
						    value={{ next }} />
						{% else %}
						     {% url satchmo_account_info as accounturl %}
						     {% if accounturl %} value="{% url satchmo_account_info %}" /> {% endif %}
						{% endif %}
					{% csrf_token %}
				    <input id='login-passord' name='password' class='login-input' type='password' placeholder="Your password" >
					{% if form.password.errors %}
					    <div style='float:left;'><p class='error'> ***{{ form.password.errors|join:", " }}</p></div>
					{% endif%}
					
				</div>
		</div>
		<div id='login-submit-container'>
		    <button class="btn btn-login" id="login-submit" name="login-submit" type="submit">Here we go!</button>
		</div>
		</form>
		<div class='pwd-reset-container'>
			{% url registration_register as registration_register %}
			{% url auth_password_reset as auth_password_reset %}
			{% if auth_password_reset %}
			    <p class='password-reset'><span>{% trans "If you do not remember your password, please" %} <a href="{% url auth_password_reset %}">{% trans "click here</a> to have it reset." %}</span></p>
			{% endif %}
		</div>
		{% endblock loginsignupform %}
    </div>
    <div id='login-right-panel'>
		{% if is_register_only %}
			<div id='login-signup-button-container'>
			    <button class="btn btn-signup" id="signup-btn" onClick="javascript:window.location='/accounts/login/?next={% if next %}{{next}}{% else %}{% url satchmo_account_info as accounturl %}{% if accounturl %}{% url satchmo_account_info %}{% endif %}{% endif %}'" >Login</button>
			</div>
        {% else %}
			<div id='login-signup-button-container'>
			    <button class="btn btn-signup" id="signup-btn" onClick="javascript:window.location='{% url registration_register %}?next={% if next %}{{next}}{% else %}{% url satchmo_account_info as accounturl %}{% if accounturl %}{% url satchmo_account_info %}{% endif %}{% endif %}'" >Sign up</button>
			</div>
		{% endif %}
		<div style='width:8em;margin-left:auto;margin-right:auto;font-size:30px;'>
			<div id='login-sep-line-container'>
				<div class='sep-line-top'></div>
				<div class='sep-line-bottom'></div>
			</div>
			<p class='login-tips'>
				<span>or login with</span>
			</p>
		</div>
		<div id='login-sns-container'>
			{% for name in social_auth.backends.oauth2 %}
			    {% ifequal name 'facebook' %}
					<button onClick='javascript:window.location="{% url socialauth_begin name %}?next={% if next %}{{next}}{% else %}{% url satchmo_account_info as accounturl %}{% if accounturl %}{% url satchmo_account_info %}{% endif %}{% endif %}"' class='login-sns-button btn facebook'>
						<img style='display:block;float:left;margin-left:5%;' src='{{MEDIA_URL}}img/f.png'>Facebook
					</button>
                    <span>&nbsp;&nbsp;</span>
				{% else %}
					<button class='login-sns-button btn'>
						<img style='display:block;float:left;margin-left:5%;' src='{{MEDIA_URL}}img/sinaweibo.png' width=23>Sina Weibo
					</button>
				{% endifequal %}
			{% endfor %}
		</div>
	</div>

    <div class="push"></div>
</div>
<!-- </div> -->
<!-- <div class="clearfix" ></div> -->
<!-- </div> -->
<div class="footer"></div>
{% endspaceless %}

<script type="text/javascript" src="{{MEDIA_URL}}js/libs/jquery-1.7.2.min.js"></script>
<script type="text/javascript" >
(function ($) {
    function FauxPlaceholder() {
        if(!ElementSupportAttribute('input','placeholder')) {
            $("input[placeholder]").each(function() {
                var $input = $(this);
		        var originalColor = $input.css('color');
		        var placeholderColor = '#bbb';
                $input.after('<input id="'+$input.attr('id')+'-faux" style="display:none;" type="text" value="' + $input.attr('placeholder') + '" />');
                var $faux = $('#'+$input.attr('id')+'-faux');

                $faux.show().attr('class', $input.attr('class')).attr('style', $input.attr('style'));
                $faux.css('color',placeholderColor);    
                $input.hide();

                $faux.focus(function() {
                    $faux.hide();
                    $input.show().focus();
                    $input.css('color',originalColor);   
                });

                $input.blur(function() {
                    if($input.val() === '') {
                        $input.hide();
                        $faux.show();
                        $faux.css('color',placeholderColor);   
                    }
                });
            });
        }
    }
    function ElementSupportAttribute(elm, attr) {
        var test = document.createElement(elm);
        return attr in test;
    }
    FauxPlaceholder();	
    
    if($.browser.msie & $.browser.version < 10.0){
        $('#beautiful-login').css({
        	'background':'url({{MEDIA_URL}}img/gradient-bg-2.png) center center no-repeat'
						          ,'background-size': '100% 100%'
        });
        var fixIeCss = {
        	'background-color':'rgba(82,168,236,0.6)',
        	'padding':'2px 4px'
        }
        $('.password-reset').css(fixIeCss);
        $('.login-tips span').css(fixIeCss);
    }
})(jQuery);	
</script>

 
{% endblock %}
