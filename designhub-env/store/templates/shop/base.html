{% load i18n satchmo_category satchmo_google satchmo_util satchmo_currency satchmo_discounts app_plugins normalize_decimal %}
{% block doctype %}<!DOCTYPE html>
<html lang="en">
{% endblock %}
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="{{ MEDIA_URL }}css/bootstrap.min.css" rel="stylesheet">
	<link rel="shortcut icon" href="{{ MEDIA_URL }}favicon.ico">
    {% block extra-head %}{% endblock %}
    <link rel="stylesheet" href="{{ MEDIA_URL }}css/imports.css">
    {% block stylesheet %}<link rel="stylesheet" href="{{ MEDIA_URL }}css/style.20121024.p1.css" />
    {% endblock %}
    <title>{% block title %}{{ shop_name }}, a platform for local creativity.{% if pagetitle %}: {{ pagetitle }}{% endif %}{% endblock %}</title>
    {% block extrastyle %}<link rel="stylesheet" href="{{ MEDIA_URL }}css/jquery.fancybox.css" />{% endblock %}
    {% block extrahead %}{% endblock %}
    
    {% block preloadcommonjs %}
		<script type="text/javascript">
		  var _gaq = _gaq || [];
		  _gaq.push(['_setAccount', 'UA-32832750-1']);
		  _gaq.push(['_setDomainName', 'designhub.hk']);
		  _gaq.push(['_trackPageview']);
		
		  (function() {
		    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		  })();
		</script>
        <script type="text/javascript" src="{{MEDIA_URL}}js/preload.main.20121015.js"></script>
    {% endblock preloadcommonjs %}
    {% block extracommonjs %}
    
    {% endblock extracommonjs %}
</head>
{% block body %}
<body{% if bodyid %} id="{{ bodyid }}"{% endif %}{% if bodyclass %} class="{{ bodyclass }}"{% endif %}>
    <div class="wrapper">
		{% block header %}{% include "header0.html" with category=category %}{% endblock %}
		
		{% block breadcrumbs %}
		<div class='mycontainer'>
		    <div class="container">
			    <a href="{{ shop_base }}/">{% trans "Home" %}</a>
			    {% block breadcrumbs-inner %}
				{% endblock breadcrumbs-inner %}
			</div>
		</div>
		{% endblock breadcrumbs %}
		<div class='mycontainer' style='padding-top:10px;padding-bottom:50px;'>
			<style>
				.various-hide{
					position:absolute;top:-10000px;
				}
			</style>
			{% if user.is_active %}
			{% else %}
			<a class="various various-hide" href="#launching-inline">Ajax</a>
		    <div id='launching-inline' style='display:none;'>
		    	{% include "launching/subscription-inline.html" %}
		    </div>
		    {% endif %}
		<!--     <a class="various various-hide" data-fancybox-type="iframe"  href="/launching/">Ajax</a>     -->
		    <div class='container'>
				{% block content %}
				{% endblock content %}
			</div>
			{% block indexfooter %}
			{% endblock indexfooter %}
		    <div class='push'></div>
		</div>
	</div>
	{% block footer %}{% include "footer0.html" %}{% endblock %}
    <script type="text/javascript" src="{{MEDIA_URL}}js/libs/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="{{MEDIA_URL}}js/libs/jquery-ui.min.js"></script>
    <script type="text/javascript" src="{{MEDIA_URL}}js/libs/bootstrap.min.js"></script>
    <script type="text/javascript" src="{{ MEDIA_URL }}js/main.20121005.js"></script>
    <script type="text/javascript" >
	    (function ($) {
            $('.qtip-title-tip').tooltip();
            $('.sns-button-wrapper').tooltip({placement:'top'});
	    })(jQuery);
	</script>
    {% block extrajs %}
    {% block preloadextrajs %}
    {% endblock preloadextrajs  %}
    {% block mainextrajs %}
    <!-- launching page part optional-->
    <script type="text/javascript" src="{{MEDIA_URL}}js/fancybox/jquery.fancybox.pack.js"></script>
    <!-- launching page part -->
    <style>
    	.fancybox-close-launching{
    		top:1px;
    		right:1px;
    		width:45px;
    		height:45px;
            background:url('{{MEDIA_URL}}img/close-button-launching.png') no-repeat;
    		background-position: center center;
    		background-size: 50% 50%;
    	}
    	.fancybox-skin-launching{/*,.fancybox-overlay{*/
    		background:transparent;
    	}
    	#gradient-bg-wrapper{
			background-image: -ms-radial-gradient(center, ellipse farthest-side,  rgba(126,126,126,0.5) 20%, rgba(0,0,0,0.8) 150%);
			
			/* Mozilla Firefox */ 
			background-image: -moz-radial-gradient(center, ellipse farthest-side,  rgba(126,126,126,0.5) 20%, rgba(0,0,0,0.8) 150%);
			
			/* Opera */ 
			background-image: -o-radial-gradient(center, ellipse farthest-side,   rgba(126,126,126,0.5) 20%, rgba(0,0,0,0.8) 150%);
			
			/* Webkit (Safari/Chrome 10) */ 
			background-image: -webkit-gradient(radial, center center, 0, center center, 487, color-stop(0.2, #FFFFFF), color-stop(1.5, rgba(0,0,0,0.8)));
			
			/* Webkit (Chrome 11+) */ 
			background-image: -webkit-radial-gradient(center, ellipse farthest-side, rgba(126,126,126,0.5) 20%, rgba(0,0,0,0.8) 150%);
			
			/* W3C Markup, IE10 Release Preview */ 
			background-image: radial-gradient(ellipse farthest-side at center,  rgba(126,126,126,0.5) 20%,rgba(0,0,0,0.8) 150%);

    	}
    </style>
    <script type="text/javascript" >
		$(document).ready(function() {
			{% if user.is_active %}
			{% else %}
			$(".various").fancybox({
				padding     : 0,
				margin      : 0,
				tpl         : {
									wrap     : '<div id="gradient-bg-wrapper" class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin fancybox-skin-launching"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',
									image    : '<img class="fancybox-image" src="{href}" alt="" />',
									iframe   : '<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0"' + ($.browser.msie ? ' allowtransparency="true"' : '') + '></iframe>',
									error    : '<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',
									closeBtn : '<a title="Close" class="fancybox-item fancybox-close fancybox-close-launching" href="javascript:;"></a>',
									next     : '<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',
									prev     : '<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'
								},
				fitToView	: false,
				width		: '100%',
				height		: '100%',
				autoSize	: false,
				closeClick	: false,
				openEffect	: 'none',
				closeEffect	: 'none',
				helpers : { 
						   overlay: {
						    css: {}} // overlay 
						  } //helpers
			});
                $('#launching-inline').show();
			    $(".various").click();
			

	    	$('#launching-form').submit(function() {
				  var reg = new RegExp(/^\S+@\S+\.\S+$/);
				  var em = $("#launching-input").val();
				  var $that = $(this);
				  if (!reg.test(em)) {
				    alert('Please correct your email address.');
				    $("#launching-input").focus();
				  } else {
				    $.ajax({
				      type: "POST",
				      url: '/launching/',
				      data : 'email=' + em,
				      success: function(msg) {
                           $that.replaceWith("<p class='launching-line thanks'>Thanks for your attention, we'll contact you soon!</p>");
				      }
				    });   
				  }
				  return false;
				});
				//solving the plaoceholder problem
			    $('input[placeholder]').each(function(){  
			        
			        var input = $(this);        
			        var originalColor = input.css('color');
			        var placeholderColor = '#bbb'
			        $(input).val(input.attr('placeholder'));
			        $(input).css('color',placeholderColor);    
			        $(input).focus(function(){
			             if (input.val() == input.attr('placeholder')) {
			                 input.val('');
			                 $(input).css('color',originalColor);   
			             }
			        });
			        
			        $(input).blur(function(){
			            if (input.val() == '' || input.val() == input.attr('placeholder')) {
			                input.val(input.attr('placeholder'));
			                $(input).css('color',placeholderColor);
			            }
			        });
			    });
			    {% endif %}
	    });
    </script>
    <!-- launching page part -->
    {% endblock mainextrajs %}
    {% endblock extrajs %}
</body>
{% endblock %}
</html>
